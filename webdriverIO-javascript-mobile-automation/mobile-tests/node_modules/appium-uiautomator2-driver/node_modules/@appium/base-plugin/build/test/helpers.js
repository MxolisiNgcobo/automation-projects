"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.e2eSetup = e2eSetup;

require("source-map-support/register");

var _support = require("@appium/support");

var _appium = require("appium");

var _getPort = _interopRequireDefault(require("get-port"));

var _logSymbols = require("log-symbols");

var _teen_process = require("teen_process");

const APPIUM_BIN = require.resolve('appium');

function e2eSetup(opts) {
  let {
    appiumHome,
    before,
    after,
    serverArgs = {},
    driverSource,
    driverPackage,
    driverName,
    driverSpec,
    pluginSource,
    pluginPackage,
    pluginSpec,
    pluginName,
    port,
    host
  } = opts;
  let server;
  before(async function () {
    const setupAppiumHome = async () => {
      const env = { ...process.env
      };

      if (appiumHome) {
        env.APPIUM_HOME = appiumHome;
        await _support.fs.mkdirp(appiumHome);
        console.log(`${_logSymbols.info} Set \`APPIUM_HOME\` to ${appiumHome}`);
      }

      return env;
    };

    const installDriver = async env => {
      var _installedDrivers$dri;

      console.log(`${_logSymbols.info} Checking if driver "${driverName}" is installed...`);
      const driverListArgs = [APPIUM_BIN, 'driver', 'list', '--json'];
      console.log(`${_logSymbols.info} Running: ${process.execPath} ${driverListArgs.join(' ')}`);
      const {
        stdout: driverListJson
      } = await (0, _teen_process.exec)(process.execPath, driverListArgs, {
        env
      });
      const installedDrivers = JSON.parse(driverListJson);

      if (!((_installedDrivers$dri = installedDrivers[driverName]) !== null && _installedDrivers$dri !== void 0 && _installedDrivers$dri.installed)) {
        console.log(`${_logSymbols.warning} Driver "${driverName}" not installed; installing...`);
        const driverArgs = [APPIUM_BIN, 'driver', 'install', '--source', driverSource, driverSpec];

        if (driverPackage) {
          driverArgs.push('--package', driverPackage);
        }

        console.log(`${_logSymbols.info} Running: ${process.execPath} ${driverArgs.join(' ')}`);
        await (0, _teen_process.exec)(process.execPath, driverArgs, {
          env
        });
      }

      console.log(`${_logSymbols.success} Installed driver "${driverName}"`);
    };

    const installPlugin = async env => {
      var _installedPlugins$plu;

      console.log(`${_logSymbols.info} Checking if plugin "${pluginName}" is installed...`);
      const pluginListArgs = [APPIUM_BIN, 'plugin', 'list', '--json'];
      const {
        stdout: pluginListJson
      } = await (0, _teen_process.exec)(process.execPath, pluginListArgs, {
        env
      });
      const installedPlugins = JSON.parse(pluginListJson);

      if (!((_installedPlugins$plu = installedPlugins[pluginName]) !== null && _installedPlugins$plu !== void 0 && _installedPlugins$plu.installed)) {
        console.log(`${_logSymbols.warning} Plugin "${pluginName}" not installed; installing...`);
        const pluginArgs = [APPIUM_BIN, 'plugin', 'install', '--source', pluginSource, pluginSpec];

        if (pluginPackage) {
          pluginArgs.push('--package', pluginPackage);
        }

        console.log(`${_logSymbols.info} Running: ${process.execPath} ${pluginArgs.join(' ')}`);
        await (0, _teen_process.exec)(process.execPath, pluginArgs, {
          env
        });
      }

      console.log(`${_logSymbols.success} Installed plugin "${pluginName}"`);
    };

    const createServer = async () => {
      if (!port) {
        port = await (0, _getPort.default)();
      }

      console.log(`${_logSymbols.info} Will use port ${port} for Appium server`);
      this.port = port;
      const args = {
        port,
        address: host,
        usePlugins: [pluginName],
        useDrivers: [driverName],
        appiumHome,
        ...serverArgs
      };
      server = await (0, _appium.main)(args);
    };

    const env = await setupAppiumHome();
    await installDriver(env);
    await installPlugin(env);
    await createServer();
  });
  after(async function () {
    if (server) {
      await server.close();
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBUFBJVU1fQklOIiwicmVxdWlyZSIsInJlc29sdmUiLCJlMmVTZXR1cCIsIm9wdHMiLCJhcHBpdW1Ib21lIiwiYmVmb3JlIiwiYWZ0ZXIiLCJzZXJ2ZXJBcmdzIiwiZHJpdmVyU291cmNlIiwiZHJpdmVyUGFja2FnZSIsImRyaXZlck5hbWUiLCJkcml2ZXJTcGVjIiwicGx1Z2luU291cmNlIiwicGx1Z2luUGFja2FnZSIsInBsdWdpblNwZWMiLCJwbHVnaW5OYW1lIiwicG9ydCIsImhvc3QiLCJzZXJ2ZXIiLCJzZXR1cEFwcGl1bUhvbWUiLCJlbnYiLCJwcm9jZXNzIiwiQVBQSVVNX0hPTUUiLCJmcyIsIm1rZGlycCIsImNvbnNvbGUiLCJsb2ciLCJpbmZvIiwiaW5zdGFsbERyaXZlciIsImRyaXZlckxpc3RBcmdzIiwiZXhlY1BhdGgiLCJqb2luIiwic3Rkb3V0IiwiZHJpdmVyTGlzdEpzb24iLCJleGVjIiwiaW5zdGFsbGVkRHJpdmVycyIsIkpTT04iLCJwYXJzZSIsImluc3RhbGxlZCIsIndhcm5pbmciLCJkcml2ZXJBcmdzIiwicHVzaCIsInN1Y2Nlc3MiLCJpbnN0YWxsUGx1Z2luIiwicGx1Z2luTGlzdEFyZ3MiLCJwbHVnaW5MaXN0SnNvbiIsImluc3RhbGxlZFBsdWdpbnMiLCJwbHVnaW5BcmdzIiwiY3JlYXRlU2VydmVyIiwiZ2V0UG9ydCIsImFyZ3MiLCJhZGRyZXNzIiwidXNlUGx1Z2lucyIsInVzZURyaXZlcnMiLCJhcHBpdW1TZXJ2ZXIiLCJjbG9zZSJdLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3QvaGVscGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtY2hlY2tcblxuLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuaW1wb3J0IHtmc30gZnJvbSAnQGFwcGl1bS9zdXBwb3J0JztcbmltcG9ydCB7bWFpbiBhcyBhcHBpdW1TZXJ2ZXJ9IGZyb20gJ2FwcGl1bSc7XG5pbXBvcnQgZ2V0UG9ydCBmcm9tICdnZXQtcG9ydCc7XG5pbXBvcnQge2luZm8sIHN1Y2Nlc3MsIHdhcm5pbmd9IGZyb20gJ2xvZy1zeW1ib2xzJztcbmltcG9ydCB7ZXhlY30gZnJvbSAndGVlbl9wcm9jZXNzJztcblxuY29uc3QgQVBQSVVNX0JJTiA9IHJlcXVpcmUucmVzb2x2ZSgnYXBwaXVtJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBob29rcyB0byBpbnN0YWxsIGEgZHJpdmVyIGFuZCBhIHBsdWdpbiBhbmQgc3RhcnRzIGFuIEFwcGl1bSBzZXJ2ZXIgdy8gdGhlIGdpdmVuIGV4dGVuc2lvbnMuXG4gKiBAcGFyYW0ge0UyRVNldHVwT3B0c30gb3B0c1xuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGUyZVNldHVwKG9wdHMpIHtcbiAgbGV0IHtcbiAgICBhcHBpdW1Ib21lLFxuICAgIGJlZm9yZSxcbiAgICBhZnRlcixcbiAgICBzZXJ2ZXJBcmdzID0ge30sXG4gICAgZHJpdmVyU291cmNlLFxuICAgIGRyaXZlclBhY2thZ2UsXG4gICAgZHJpdmVyTmFtZSxcbiAgICBkcml2ZXJTcGVjLFxuICAgIHBsdWdpblNvdXJjZSxcbiAgICBwbHVnaW5QYWNrYWdlLFxuICAgIHBsdWdpblNwZWMsXG4gICAgcGx1Z2luTmFtZSxcbiAgICBwb3J0LFxuICAgIGhvc3QsXG4gIH0gPSBvcHRzO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7QXBwaXVtU2VydmVyfVxuICAgKi9cbiAgbGV0IHNlcnZlcjtcblxuICBiZWZvcmUoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHNldHVwQXBwaXVtSG9tZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIC8qKlxuICAgICAgICogQHR5cGUge0FwcGl1bUVudn1cbiAgICAgICAqL1xuICAgICAgY29uc3QgZW52ID0gey4uLnByb2Nlc3MuZW52fTtcblxuICAgICAgaWYgKGFwcGl1bUhvbWUpIHtcbiAgICAgICAgZW52LkFQUElVTV9IT01FID0gYXBwaXVtSG9tZTtcbiAgICAgICAgYXdhaXQgZnMubWtkaXJwKGFwcGl1bUhvbWUpO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtpbmZvfSBTZXQgXFxgQVBQSVVNX0hPTUVcXGAgdG8gJHthcHBpdW1Ib21lfWApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZW52O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXBwaXVtRW52fSBlbnZcbiAgICAgKi9cbiAgICBjb25zdCBpbnN0YWxsRHJpdmVyID0gYXN5bmMgKGVudikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYCR7aW5mb30gQ2hlY2tpbmcgaWYgZHJpdmVyIFwiJHtkcml2ZXJOYW1lfVwiIGlzIGluc3RhbGxlZC4uLmApO1xuICAgICAgY29uc3QgZHJpdmVyTGlzdEFyZ3MgPSBbQVBQSVVNX0JJTiwgJ2RyaXZlcicsICdsaXN0JywgJy0tanNvbiddO1xuICAgICAgY29uc29sZS5sb2coYCR7aW5mb30gUnVubmluZzogJHtwcm9jZXNzLmV4ZWNQYXRofSAke2RyaXZlckxpc3RBcmdzLmpvaW4oJyAnKX1gKTtcbiAgICAgIGNvbnN0IHtzdGRvdXQ6IGRyaXZlckxpc3RKc29ufSA9IGF3YWl0IGV4ZWMocHJvY2Vzcy5leGVjUGF0aCwgZHJpdmVyTGlzdEFyZ3MsIHtcbiAgICAgICAgZW52LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBpbnN0YWxsZWREcml2ZXJzID0gSlNPTi5wYXJzZShkcml2ZXJMaXN0SnNvbik7XG5cbiAgICAgIGlmICghaW5zdGFsbGVkRHJpdmVyc1tkcml2ZXJOYW1lXT8uaW5zdGFsbGVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dhcm5pbmd9IERyaXZlciBcIiR7ZHJpdmVyTmFtZX1cIiBub3QgaW5zdGFsbGVkOyBpbnN0YWxsaW5nLi4uYCk7XG4gICAgICAgIGNvbnN0IGRyaXZlckFyZ3MgPSBbQVBQSVVNX0JJTiwgJ2RyaXZlcicsICdpbnN0YWxsJywgJy0tc291cmNlJywgZHJpdmVyU291cmNlLCBkcml2ZXJTcGVjXTtcbiAgICAgICAgaWYgKGRyaXZlclBhY2thZ2UpIHtcbiAgICAgICAgICBkcml2ZXJBcmdzLnB1c2goJy0tcGFja2FnZScsIGRyaXZlclBhY2thZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2luZm99IFJ1bm5pbmc6ICR7cHJvY2Vzcy5leGVjUGF0aH0gJHtkcml2ZXJBcmdzLmpvaW4oJyAnKX1gKTtcbiAgICAgICAgYXdhaXQgZXhlYyhwcm9jZXNzLmV4ZWNQYXRoLCBkcml2ZXJBcmdzLCB7XG4gICAgICAgICAgZW52LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGAke3N1Y2Nlc3N9IEluc3RhbGxlZCBkcml2ZXIgXCIke2RyaXZlck5hbWV9XCJgKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FwcGl1bUVudn0gZW52XG4gICAgICovXG4gICAgY29uc3QgaW5zdGFsbFBsdWdpbiA9IGFzeW5jIChlbnYpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGAke2luZm99IENoZWNraW5nIGlmIHBsdWdpbiBcIiR7cGx1Z2luTmFtZX1cIiBpcyBpbnN0YWxsZWQuLi5gKTtcbiAgICAgIGNvbnN0IHBsdWdpbkxpc3RBcmdzID0gW0FQUElVTV9CSU4sICdwbHVnaW4nLCAnbGlzdCcsICctLWpzb24nXTtcbiAgICAgIGNvbnN0IHtzdGRvdXQ6IHBsdWdpbkxpc3RKc29ufSA9IGF3YWl0IGV4ZWMocHJvY2Vzcy5leGVjUGF0aCwgcGx1Z2luTGlzdEFyZ3MsIHtcbiAgICAgICAgZW52LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBpbnN0YWxsZWRQbHVnaW5zID0gSlNPTi5wYXJzZShwbHVnaW5MaXN0SnNvbik7XG5cbiAgICAgIGlmICghaW5zdGFsbGVkUGx1Z2luc1twbHVnaW5OYW1lXT8uaW5zdGFsbGVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dhcm5pbmd9IFBsdWdpbiBcIiR7cGx1Z2luTmFtZX1cIiBub3QgaW5zdGFsbGVkOyBpbnN0YWxsaW5nLi4uYCk7XG4gICAgICAgIGNvbnN0IHBsdWdpbkFyZ3MgPSBbQVBQSVVNX0JJTiwgJ3BsdWdpbicsICdpbnN0YWxsJywgJy0tc291cmNlJywgcGx1Z2luU291cmNlLCBwbHVnaW5TcGVjXTtcbiAgICAgICAgaWYgKHBsdWdpblBhY2thZ2UpIHtcbiAgICAgICAgICBwbHVnaW5BcmdzLnB1c2goJy0tcGFja2FnZScsIHBsdWdpblBhY2thZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGAke2luZm99IFJ1bm5pbmc6ICR7cHJvY2Vzcy5leGVjUGF0aH0gJHtwbHVnaW5BcmdzLmpvaW4oJyAnKX1gKTtcbiAgICAgICAgYXdhaXQgZXhlYyhwcm9jZXNzLmV4ZWNQYXRoLCBwbHVnaW5BcmdzLCB7XG4gICAgICAgICAgZW52LFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGAke3N1Y2Nlc3N9IEluc3RhbGxlZCBwbHVnaW4gXCIke3BsdWdpbk5hbWV9XCJgKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY3JlYXRlU2VydmVyID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCFwb3J0KSB7XG4gICAgICAgIHBvcnQgPSBhd2FpdCBnZXRQb3J0KCk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgJHtpbmZvfSBXaWxsIHVzZSBwb3J0ICR7cG9ydH0gZm9yIEFwcGl1bSBzZXJ2ZXJgKTtcbiAgICAgIHRoaXMucG9ydCA9IHBvcnQ7XG5cbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KCdhcHBpdW0nKS5BcmdzfSAqL1xuICAgICAgY29uc3QgYXJncyA9IHtcbiAgICAgICAgcG9ydCxcbiAgICAgICAgYWRkcmVzczogaG9zdCxcbiAgICAgICAgdXNlUGx1Z2luczogW3BsdWdpbk5hbWVdLFxuICAgICAgICB1c2VEcml2ZXJzOiBbZHJpdmVyTmFtZV0sXG4gICAgICAgIGFwcGl1bUhvbWUsXG4gICAgICAgIC4uLnNlcnZlckFyZ3MsXG4gICAgICB9O1xuICAgICAgc2VydmVyID0gLyoqIEB0eXBlIHtBcHBpdW1TZXJ2ZXJ9ICovIChhd2FpdCBhcHBpdW1TZXJ2ZXIoYXJncykpO1xuICAgIH07XG5cbiAgICBjb25zdCBlbnYgPSBhd2FpdCBzZXR1cEFwcGl1bUhvbWUoKTtcbiAgICBhd2FpdCBpbnN0YWxsRHJpdmVyKGVudik7XG4gICAgYXdhaXQgaW5zdGFsbFBsdWdpbihlbnYpO1xuICAgIGF3YWl0IGNyZWF0ZVNlcnZlcigpO1xuICB9KTtcblxuICBhZnRlcihhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNlcnZlcikge1xuICAgICAgYXdhaXQgc2VydmVyLmNsb3NlKCk7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHtlMmVTZXR1cH07XG5cbi8qKlxuICogQHR5cGVkZWYgRTJFU2V0dXBPcHRzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2FwcGl1bUhvbWVdIC0gUGF0aCB0byBBcHBpdW0gaG9tZSBkaXJlY3RvcnlcbiAqIEBwcm9wZXJ0eSB7TW9jaGEuYmVmb3JlfSBiZWZvcmUgLSBNb2NoYSBcImJlZm9yZSBhbGxcIiBob29rIGZ1bmN0aW9uXG4gKiBAcHJvcGVydHkge01vY2hhLmFmdGVyfSBhZnRlciAtIE1vY2hhIFwiYWZ0ZXIgYWxsXCIgaG9vayBmdW5jdGlvblxuICogQHByb3BlcnR5IHtQYXJ0aWFsPGltcG9ydCgnYXBwaXVtJykuQXJncz59IFtzZXJ2ZXJBcmdzXSAtIEFyZ3VtZW50cyB0byBwYXNzIHRvIEFwcGl1bSBzZXJ2ZXJcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KCdhcHBpdW0vdHlwZXMnKS5JbnN0YWxsVHlwZSAmIHN0cmluZ30gW2RyaXZlclNvdXJjZV0gLSBTb3VyY2Ugb2YgZHJpdmVyIHRvIGluc3RhbGxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZHJpdmVyUGFja2FnZV0gLSBQYWNrYWdlIG5hbWUgb2YgZHJpdmVyIHRvIGluc3RhbGxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZHJpdmVyTmFtZV0gLSBOYW1lIG9mIGRyaXZlciB0byBpbnN0YWxsXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2RyaXZlclNwZWNdIC0gU3BlYyBvZiBkcml2ZXIgdG8gaW5zdGFsbFxuICogQHByb3BlcnR5IHtpbXBvcnQoJ2FwcGl1bS90eXBlcycpLkluc3RhbGxUeXBlICYgc3RyaW5nfSBbcGx1Z2luU291cmNlXSAtIFNvdXJjZSBvZiBwbHVnaW4gdG8gaW5zdGFsbFxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtwbHVnaW5QYWNrYWdlXSAtIFBhY2thZ2UgbmFtZSBvZiBwbHVnaW4gdG8gaW5zdGFsbFxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtwbHVnaW5TcGVjXSAtIFNwZWMgb2YgcGx1Z2luIHRvIGluc3RhbGxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcGx1Z2luTmFtZV0gLSBOYW1lIG9mIHBsdWdpbiB0byBpbnN0YWxsXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BvcnRdIC0gUG9ydCB0byB1c2UgZm9yIEFwcGl1bSBzZXJ2ZXJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbaG9zdF0gLSBIb3N0IHRvIHVzZSBmb3IgQXBwaXVtIHNlcnZlclxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydCgnQGFwcGl1bS90eXBlcycpLkFwcGl1bVNlcnZlcn0gQXBwaXVtU2VydmVyXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydCgnYXBwaXVtL3R5cGVzJykuQXBwaXVtRW52fSBBcHBpdW1FbnZcbiAqL1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUdBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLE1BQU1BLFVBQVUsR0FBR0MsT0FBTyxDQUFDQyxPQUFSLENBQWdCLFFBQWhCLENBQW5COztBQU9BLFNBQVNDLFFBQVQsQ0FBa0JDLElBQWxCLEVBQXdCO0VBQ3RCLElBQUk7SUFDRkMsVUFERTtJQUVGQyxNQUZFO0lBR0ZDLEtBSEU7SUFJRkMsVUFBVSxHQUFHLEVBSlg7SUFLRkMsWUFMRTtJQU1GQyxh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